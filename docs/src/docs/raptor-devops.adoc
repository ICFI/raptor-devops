= DevSecOps Example
v${project.version}
ifdef::backend-pdf[]
:title-logo-image: image:icf-logo.png[500, 500, align="center"]
endif::backend-pdf[]

ifdef::backend-html5[]
image::icf-logo.png[ICF Logo, 150, 150, float="left"]
endif::backend-html5[]

== Overview

This project demonstrates an automated process to deploy a CI/CD environment with several project build quality and
security tools incorporated.

== Building

=== Prerequisite

* http://www.oracle.com/technetwork/pt/java/javase/downloads/index.html[Java 8 JDK^]: Download from Oracle or
    use a packaged version for your OS

=== Project

. Execute the command `./mvnw verify` on Mac or Linux or `./mvnw.cmd verify` on Windows
    ** To build the documentation run with the docs profile activated ex: `./mvnw -P docs -pl docs package`

== Deployment

=== Using Sceptre

This is an optional tool to deploy the solution as the `cloudformation/templates/devsecops-stack.yaml` template
can be uploaded directly to the CloudFormation console if desired. Sceptre makes deployments via the CLI much easier
and is the recommended approach. To gather the needed information and pass arguments to the tool a Makefile has also
been included at the root of the project so deployments can be as easy as `make [create|update|delete]` Sceptre is a
Python tool and can be installed using pip.

==== Prerequisites (recommended)

. Python 2.7.x
. AWS CLI (http://docs.aws.amazon.com/cli/latest/userguide/installing.html[install] and
http://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html[configuration] instructions)
. Make

==== Steps

. Ensure that the `make` application has been installed on your system
    ** If you don't want to use make it's just a convenience layer over a number of single line commands which could
    certainly be called individually if desired.
. Execute the `make init` target which will install virtualenv and initialize Python dependencies in an isolated environment
    for this project.
. Activate the environment by running the command `source deploy/bin/activate`
. Review the configuration settings in `cloudformation/config/dev` if different region and availability zones are desired
. The commands to work with CloudFormation are now `make [create|update|delete|outputs|validate]`
    ** Updates to the template can be syntax checked with the command `make validate`
. Once the stack has reached the CREATE_COMPLETE status the outputs can be retrieved with `make outputs`

_Example `make outputs` display after stack creation with `make create` command_
```shell
$ make outputs
- Description: The DNS name of the load balancer
  OutputKey: LoadBalancerDNSName
  OutputValue: rapto-LoadB-1T5ZNMXZZQVK9-1192740135.us-east-2.elb.amazonaws.com // <1>
- Description: Stack version
  OutputKey: Version
  OutputValue: 0.0.1-SNAPSHOT
```
<1> Copy this into your web browser

== Container Images

=== jenkins-ecs

=== jenkins-demo

== Tools

* Project Build and Packaging:
    ** https://maven.apache.org/[Apache Maven^] is a software project management tool used to build and package the project
*Application Platform:
    ** https://aws.amazon.com/ecs/[AWS EC2 Container Service^] is a highly scalable, high performance container
        management service that supports Docker containers and allows you to easily run applications on a managed
        cluster of Amazon EC2 instances.
* Deployment Orchestration
    ** https://aws.amazon.com/cloudformation/[AWS CloudFormation^] gives developers and systems administrators an easy way to
        create and manage a collection of related AWS resources, provisioning and updating them in an orderly and predictable
        fashion.
    ** https://sceptre.cloudreach.com[Sceptre^] is a tool to drive Cloudformation. Sceptre manages the creating, updating and
        deletion of stacks, and provides meta commands to allow users to get information about their stacks.
* Documentation:
    ** http://asciidoctor.org[AsciiDoctor^] markup and transformation is used to create the documentation

=== Documentation Links
////
PDF Generation gives an error if you try to use icons
////
ifdef::backend-html5[]
=== icon:file-pdf-o[] pass:[<a href="./raptor-devops.pdf" target="_blank">PDF Version</a>]
=== icon:file-code-o[] https://github.com/ICFI/raptor-devops[Source^]
endif::backend-html5[]
ifdef::backend-pdf[]
=== https://github.com/ICFI/raptor-devops[Source^]
endif::backend-pdf[]

=== Version

This documentation was generated on ${build.timestamp} for project version ${project.version} from commit https://github.com/spohnan/lucee-eb-example/commit/${buildNumber}[${buildNumber}^].